"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,r=require("tslib"),t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,o=require("howler"),u=function(){},a=n.createContext(null);exports.AudioPlayerProvider=function(e){var r=e.children,u=e.value,i=t.useState(null),l=i[0],s=i[1],c=t.useRef(),f=t.useState(null),d=f[0],p=f[1],y=t.useState(!0),v=y[0],b=y[1],_=t.useState(!1),m=_[0],g=_[1],w=t.useState(!0),x=w[0],E=w[1],P=t.useCallback((function(e){var r=e.src,t=e.format,n=e.autoplay,u=void 0!==n&&n,a=!1;if(c.current){if(c.current._src===r)return;a=c.current.playing(),c.current.unload()}var i=new o.Howl({src:r,format:t,autoplay:a||u,onload:function(){p(null),E(!0),b(!1)},onplay:function(){i.playing()&&(g(!0),E(!1))},onend:function(){E(!0),g(!1)},onpause:function(){g(!1)},onstop:function(){E(!0),g(!1)},onplayerror:function(e,r){p(new Error("[Play error] "+r)),g(!1),E(!0)},onloaderror:function(e,r){p(new Error("[Load error] "+r)),b(!1)}});s(i),c.current=i}),[]);return t.useEffect((function(){return function(){c.current&&c.current.unload()}}),[]),n.createElement(a.Provider,{value:u||{player:l,load:P,error:d,loading:v,playing:m,stopped:x,ready:!v&&!d}},r)},exports.useAudioPlayer=function(e){var n=t.useContext(a),o=n.player,i=n.load,l=r.__rest(n,["player","load"]),s=e||{},c=s.src,f=s.format,d=s.autoplay;return t.useEffect((function(){c&&i({src:c,format:f,autoplay:d})}),[c,f,d,i]),r.__assign(r.__assign({},l),{play:o?o.play.bind(o):u,pause:o?o.pause.bind(o):u,stop:o?o.stop.bind(o):u,mute:o?o.mute.bind(o):u,seek:o?o.seek.bind(o):u,load:i})},exports.useAudioPosition=function(){var e=t.useContext(a),r=e.player,n=e.playing,o=e.stopped,u=t.useState(0),i=u[0],l=u[1],s=t.useState(0),c=s[0],f=s[1];return t.useEffect((function(){r&&(l(r.seek()),f(r.duration()))}),[r,o]),t.useEffect((function(){var e;return r&&n&&(e=window.setInterval((function(){return l(r.seek())}),1e3)),function(){return clearTimeout(e)}}),[r,n]),{position:i,duration:c}};
//# sourceMappingURL=react-use-audio-player.cjs.production.min.js.map
